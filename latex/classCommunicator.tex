\hypertarget{classCommunicator}{}\doxysection{Класс Communicator}
\label{classCommunicator}\index{Communicator@{Communicator}}


Этот класс отвечает за обработку коммуникации с клиентом. Он принимает векторы данных от клиента, обрабатывает их и отправляет результат обратно.  




{\ttfamily \#include $<$Communicator.\+h$>$}



Граф связей класса Communicator\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=169pt]{classCommunicator__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Открытые члены}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classCommunicator_acf8bd15fbadb498b713c380d762d3d5e}{Communicator}} (int \mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\+\_\+socket}}, const std\+::string \&\mbox{\hyperlink{classCommunicator_ad184d547c2ec7932aac78eea60e7a269}{data\+File}}, \mbox{\hyperlink{classLogger}{Logger}} \&\mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}})
\begin{DoxyCompactList}\small\item\em Конструктор класса \mbox{\hyperlink{classCommunicator}{Communicator}}. Инициализирует объект, устанавливая связь с клиентом и настраивая логирование. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classCommunicator_a7bc3a90df5f1cff8f199f6d6383ca7cb}{handle\+Client}} ()
\begin{DoxyCompactList}\small\item\em Основной метод обработки запроса клиента. Принимает данные от клиента, обрабатывает их и отправляет ответ. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classCommunicator_a4ced5362bf7438924f8d7f1b0c5ec391}{$\sim$\+Communicator}} ()
\begin{DoxyCompactList}\small\item\em Деструктор класса \mbox{\hyperlink{classCommunicator}{Communicator}}. Закрывает сокет после завершения работы. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classCommunicator_aa88ad1f944abf3272ad85ad8653f1576}{process\+Vectors}} ()
\begin{DoxyCompactList}\small\item\em Обрабатывает полученные от клиента векторы данных. ~\newline
 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classCommunicator_af4c1ce0ae7d2c8cba4512f62a9d64cf5}{send\+Result\+To\+Client}} (int32\+\_\+t result\+Value)
\begin{DoxyCompactList}\small\item\em Отправляет результат обработки векторов клиенту. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Закрытые члены}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classCommunicator_ad54c9b98698e1fb30bd4090f408ae303}{send\+Response}} (const std\+::string \&response)
\begin{DoxyCompactList}\small\item\em Отправляет ответ клиенту через сокет. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Закрытые данные}
\begin{DoxyCompactItemize}
\item 
std\+::string \mbox{\hyperlink{classCommunicator_ad184d547c2ec7932aac78eea60e7a269}{data\+File}}
\begin{DoxyCompactList}\small\item\em Путь к файлу данных, используемому в процессе обработки (если требуется). \end{DoxyCompactList}\item 
\mbox{\hyperlink{classLogger}{Logger}} \& \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}
\begin{DoxyCompactList}\small\item\em Ссылка на объект \mbox{\hyperlink{classLogger}{Logger}} для ведения логов. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\+\_\+socket}}
\begin{DoxyCompactList}\small\item\em Дескриптор сокета, используемого для общения с клиентом. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Этот класс отвечает за обработку коммуникации с клиентом. Он принимает векторы данных от клиента, обрабатывает их и отправляет результат обратно. 

\doxysubsection{Конструктор(ы)}
\mbox{\Hypertarget{classCommunicator_acf8bd15fbadb498b713c380d762d3d5e}\label{classCommunicator_acf8bd15fbadb498b713c380d762d3d5e}} 
\index{Communicator@{Communicator}!Communicator@{Communicator}}
\index{Communicator@{Communicator}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{Communicator()}{Communicator()}}
{\footnotesize\ttfamily Communicator\+::\+Communicator (\begin{DoxyParamCaption}\item[{int}]{client\+\_\+socket,  }\item[{const std\+::string \&}]{data\+File,  }\item[{\mbox{\hyperlink{classLogger}{Logger}} \&}]{logger }\end{DoxyParamCaption})}



Конструктор класса \mbox{\hyperlink{classCommunicator}{Communicator}}. Инициализирует объект, устанавливая связь с клиентом и настраивая логирование. 


\begin{DoxyParams}{Аргументы}
{\em client\+\_\+socket} & Дескриптор сокета, через который происходит общение с клиентом. \\
\hline
{\em data\+File} & Путь к файлу данных (если используется). \\
\hline
{\em logger} & Ссылка на объект \mbox{\hyperlink{classLogger}{Logger}} для записи логов. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{16     : \mbox{\hyperlink{classCommunicator_ad184d547c2ec7932aac78eea60e7a269}{dataFile}}(\mbox{\hyperlink{classCommunicator_ad184d547c2ec7932aac78eea60e7a269}{dataFile}})}
\DoxyCodeLine{17     , \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}(\mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}})}
\DoxyCodeLine{18     , \mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}(socket)}
\DoxyCodeLine{19 \{}
\DoxyCodeLine{20 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classCommunicator_a4ced5362bf7438924f8d7f1b0c5ec391}\label{classCommunicator_a4ced5362bf7438924f8d7f1b0c5ec391}} 
\index{Communicator@{Communicator}!````~Communicator@{$\sim$Communicator}}
\index{````~Communicator@{$\sim$Communicator}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{$\sim$Communicator()}{~Communicator()}}
{\footnotesize\ttfamily Communicator\+::$\sim$\+Communicator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Деструктор класса \mbox{\hyperlink{classCommunicator}{Communicator}}. Закрывает сокет после завершения работы. 


\begin{DoxyCode}{0}
\DoxyCodeLine{143 \{ close(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}); \}}

\end{DoxyCode}


\doxysubsection{Методы}
\mbox{\Hypertarget{classCommunicator_a7bc3a90df5f1cff8f199f6d6383ca7cb}\label{classCommunicator_a7bc3a90df5f1cff8f199f6d6383ca7cb}} 
\index{Communicator@{Communicator}!handleClient@{handleClient}}
\index{handleClient@{handleClient}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{handleClient()}{handleClient()}}
{\footnotesize\ttfamily void Communicator\+::handle\+Client (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Основной метод обработки запроса клиента. Принимает данные от клиента, обрабатывает их и отправляет ответ. 


\begin{DoxyCode}{0}
\DoxyCodeLine{23 \{}
\DoxyCodeLine{24     \textcolor{keywordtype}{char} login[1024] = \{ 0 \};}
\DoxyCodeLine{25     ssize\_t recvlogin = recv(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, login, \textcolor{keyword}{sizeof}(login), 0);}
\DoxyCodeLine{26     \textcolor{keywordflow}{if}(recvlogin == 0) \{}
\DoxyCodeLine{27 }
\DoxyCodeLine{28         std::string error\_message = strerror(errno);}
\DoxyCodeLine{29         std::string exception\_message = \textcolor{stringliteral}{"{}Клиент закрыл соединение: "{}} + error\_message;}
\DoxyCodeLine{30         \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, exception\_message);}
\DoxyCodeLine{31     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(recvlogin < 0) \{}
\DoxyCodeLine{32         std::string error\_message = strerror(errno);}
\DoxyCodeLine{33         std::string exception\_message = \textcolor{stringliteral}{"{}Ошибка получения логина: "{}} + error\_message;}
\DoxyCodeLine{34         \textcolor{keywordflow}{throw} std::system\_error(errno, std::generic\_category(), exception\_message);}
\DoxyCodeLine{35     \}}
\DoxyCodeLine{36     \textcolor{keywordflow}{for}(ssize\_t i = 0; i < recvlogin; ++i) \{}
\DoxyCodeLine{37         \textcolor{keywordflow}{if}(login[i] == \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{38             login[i] = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{39             \textcolor{keywordflow}{break};}
\DoxyCodeLine{40         \}}
\DoxyCodeLine{41     \}}
\DoxyCodeLine{42     \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a748005382152808a72b1a9177d9dc806}{INFO}}, \textcolor{stringliteral}{"{}Клиент прислал логин: "{}} + \textcolor{keywordtype}{string}(login));}
\DoxyCodeLine{43     \mbox{\hyperlink{classAuthenticator}{Authenticator}} authenticator(\mbox{\hyperlink{classCommunicator_ad184d547c2ec7932aac78eea60e7a269}{dataFile}}, \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}});}
\DoxyCodeLine{44     \textcolor{keywordflow}{if}(authenticator.isLoginExists(login) == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{45         \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, \textcolor{stringliteral}{"{}Клиент не прошел аутентификацию"{}});}
\DoxyCodeLine{46         \textcolor{keyword}{const} \textcolor{keywordtype}{string} errMsg = \textcolor{stringliteral}{"{}ERR"{}};}
\DoxyCodeLine{47         send(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, errMsg.c\_str(), errMsg.size(), 0);}
\DoxyCodeLine{48         close(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}});}
\DoxyCodeLine{49     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{50         \textcolor{keywordtype}{string} salt = authenticator.generateSalt();}
\DoxyCodeLine{51         send(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, salt.c\_str(), salt.size(), 0);}
\DoxyCodeLine{52         \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a748005382152808a72b1a9177d9dc806}{INFO}}, \textcolor{stringliteral}{"{}Клиенту отправлена соль: "{}} + salt);}
\DoxyCodeLine{53         \textcolor{keywordtype}{char} clientHash[1024] = \{ 0 \};}
\DoxyCodeLine{54         ssize\_t recvlclientHash = recv(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, clientHash, \textcolor{keyword}{sizeof}(clientHash), 0);}
\DoxyCodeLine{55         \textcolor{keywordflow}{if}(recvlogin == 0) \{}
\DoxyCodeLine{56             std::string error\_message = strerror(errno);}
\DoxyCodeLine{57             std::string exception\_message = \textcolor{stringliteral}{"{}Клиент закрыл соединение: "{}} + error\_message;}
\DoxyCodeLine{58             \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, exception\_message);}
\DoxyCodeLine{59         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(recvlogin < 0) \{}
\DoxyCodeLine{60             std::string error\_message = strerror(errno);}
\DoxyCodeLine{61             std::string exception\_message = \textcolor{stringliteral}{"{}Ошибка получения хеша: "{}} + error\_message;}
\DoxyCodeLine{62             \textcolor{keywordflow}{throw} std::system\_error(errno, std::generic\_category(), exception\_message);}
\DoxyCodeLine{63         \}}
\DoxyCodeLine{64         \textcolor{keywordflow}{for}(ssize\_t i = 0; i < recvlclientHash; ++i) \{}
\DoxyCodeLine{65             \textcolor{keywordflow}{if}(clientHash[i] == \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{66                 clientHash[i] = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{67                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{68             \}}
\DoxyCodeLine{69         \}}
\DoxyCodeLine{70         \textcolor{keywordflow}{if}(authenticator.compareHashes(clientHash, salt, login)) \{}
\DoxyCodeLine{71             \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a748005382152808a72b1a9177d9dc806}{INFO}}, \textcolor{stringliteral}{"{}Клиент прошел аутентификацию"{}});}
\DoxyCodeLine{72             \textcolor{keyword}{const} \textcolor{keywordtype}{string} successMsg = \textcolor{stringliteral}{"{}OK\(\backslash\)n"{}};}
\DoxyCodeLine{73             send(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, successMsg.c\_str(), successMsg.size(), 0);}
\DoxyCodeLine{74             \mbox{\hyperlink{classCommunicator_aa88ad1f944abf3272ad85ad8653f1576}{processVectors}}();}
\DoxyCodeLine{75         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{76             \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, \textcolor{stringliteral}{"{}Клиент не прошел аутентификацию"{}});}
\DoxyCodeLine{77             \textcolor{keyword}{const} \textcolor{keywordtype}{string} errMsg = \textcolor{stringliteral}{"{}ERR\(\backslash\)n"{}};}
\DoxyCodeLine{78             send(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, errMsg.c\_str(), errMsg.size(), 0);}
\DoxyCodeLine{79         \}}
\DoxyCodeLine{80     \}}
\DoxyCodeLine{81 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classCommunicator_aa88ad1f944abf3272ad85ad8653f1576}\label{classCommunicator_aa88ad1f944abf3272ad85ad8653f1576}} 
\index{Communicator@{Communicator}!processVectors@{processVectors}}
\index{processVectors@{processVectors}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{processVectors()}{processVectors()}}
{\footnotesize\ttfamily void Communicator\+::process\+Vectors (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Обрабатывает полученные от клиента векторы данных. ~\newline
 


\begin{DoxyCode}{0}
\DoxyCodeLine{85                                   \{}
\DoxyCodeLine{86     \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a748005382152808a72b1a9177d9dc806}{INFO}}, \textcolor{stringliteral}{"{}Начинаю обработку векторов"{}});}
\DoxyCodeLine{87     uint32\_t numVectors\{0\};}
\DoxyCodeLine{88     uint32\_t vectorSize\{0\};}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     ssize\_t recvBytes = recv(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, \&numVectors, \textcolor{keyword}{sizeof}(numVectors), 0);}
\DoxyCodeLine{91     \textcolor{keywordflow}{if} (recvBytes != \textcolor{keyword}{sizeof}(numVectors)) \{}
\DoxyCodeLine{92         std::string error\_message = strerror(errno);}
\DoxyCodeLine{93         std::string exception\_message = \textcolor{stringliteral}{"{}Ошибка получения количества векторов: "{}} + error\_message;}
\DoxyCodeLine{94         \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, exception\_message);}
\DoxyCodeLine{95         close(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}});}
\DoxyCodeLine{96         \textcolor{keywordflow}{return}; }
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a748005382152808a72b1a9177d9dc806}{INFO}}, \textcolor{stringliteral}{"{}От клиента пришло "{}} + std::to\_string(numVectors) + \textcolor{stringliteral}{"{} векторов"{}});}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     \textcolor{keywordflow}{for} (uint32\_t i = 0; i < numVectors; ++i) \{}
\DoxyCodeLine{102         \textcolor{keywordtype}{int} rc = recv(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, \&vectorSize, \textcolor{keyword}{sizeof}(vectorSize), 0);}
\DoxyCodeLine{103         \textcolor{keywordflow}{if} (rc == -\/1) \{}
\DoxyCodeLine{104             std::string error\_message = strerror(errno);}
\DoxyCodeLine{105             std::string exception\_message = \textcolor{stringliteral}{"{}Ошибка получения размера вектора: "{}} + error\_message;}
\DoxyCodeLine{106             \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, exception\_message);}
\DoxyCodeLine{107             close(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}});}
\DoxyCodeLine{108             \textcolor{keywordflow}{return}; }
\DoxyCodeLine{109         \}}
\DoxyCodeLine{110         std::unique\_ptr<int32\_t[]> data(\textcolor{keyword}{new} int32\_t[vectorSize]);}
\DoxyCodeLine{111         \textcolor{keywordtype}{int} rc2 = recv(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, data.get(), \textcolor{keyword}{sizeof}(int32\_t) * vectorSize, 0);}
\DoxyCodeLine{112         \textcolor{keywordflow}{if} (rc2 == -\/1) \{}
\DoxyCodeLine{113             std::string error\_message = strerror(errno);}
\DoxyCodeLine{114             std::string exception\_message = \textcolor{stringliteral}{"{}Ошибка получения данных вектора: "{}} + error\_message;}
\DoxyCodeLine{115             \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, exception\_message);}
\DoxyCodeLine{116             close(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}});}
\DoxyCodeLine{117             \textcolor{keywordflow}{return}; }
\DoxyCodeLine{118         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(rc2) != \textcolor{keyword}{sizeof}(int32\_t) * vectorSize) \{}
\DoxyCodeLine{119             std::string error\_message = \textcolor{stringliteral}{"{}Ошибка получения данных: количество полученных байт не совпадает с ожидаемым"{}};}
\DoxyCodeLine{120             \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a2fd6f336d08340583bd620a7f5694c90}{ERROR}}, error\_message);}
\DoxyCodeLine{121             close(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}});}
\DoxyCodeLine{122             \textcolor{keywordflow}{return}; }
\DoxyCodeLine{123         \}}
\DoxyCodeLine{124 std::vector<int32\_t> vectorValues(data.get(), data.get() + vectorSize);}
\DoxyCodeLine{125         int32\_t result = \mbox{\hyperlink{classHandlerVector_a37639c2a16be3009b2f14aaa49d94318}{HandlerVector::processVector}}(vectorValues);}
\DoxyCodeLine{126         \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a748005382152808a72b1a9177d9dc806}{INFO}}, \textcolor{stringliteral}{"{}Результат обработки вектора "{}} + std::to\_string(i) + \textcolor{stringliteral}{"{}: "{}} + std::to\_string(result));}
\DoxyCodeLine{127          \mbox{\hyperlink{classCommunicator_af4c1ce0ae7d2c8cba4512f62a9d64cf5}{sendResultToClient}}(result);}
\DoxyCodeLine{128     \}}
\DoxyCodeLine{129 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classCommunicator_ad54c9b98698e1fb30bd4090f408ae303}\label{classCommunicator_ad54c9b98698e1fb30bd4090f408ae303}} 
\index{Communicator@{Communicator}!sendResponse@{sendResponse}}
\index{sendResponse@{sendResponse}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{sendResponse()}{sendResponse()}}
{\footnotesize\ttfamily void Communicator\+::send\+Response (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Отправляет ответ клиенту через сокет. 


\begin{DoxyParams}{Аргументы}
{\em response} & Строка, содержащая ответ, который нужно отправить клиенту. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classCommunicator_af4c1ce0ae7d2c8cba4512f62a9d64cf5}\label{classCommunicator_af4c1ce0ae7d2c8cba4512f62a9d64cf5}} 
\index{Communicator@{Communicator}!sendResultToClient@{sendResultToClient}}
\index{sendResultToClient@{sendResultToClient}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{sendResultToClient()}{sendResultToClient()}}
{\footnotesize\ttfamily void Communicator\+::send\+Result\+To\+Client (\begin{DoxyParamCaption}\item[{int32\+\_\+t}]{result\+Value }\end{DoxyParamCaption})}



Отправляет результат обработки векторов клиенту. 


\begin{DoxyParams}{Аргументы}
{\em result\+Value} & Значение результата, которое нужно отправить клиенту. Тип int32\+\_\+t. \\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{133 \{}
\DoxyCodeLine{134     ssize\_t sentBytes = send(\mbox{\hyperlink{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}{client\_socket}}, \&resultValue, \textcolor{keyword}{sizeof}(resultValue), 0);}
\DoxyCodeLine{135     \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9a748005382152808a72b1a9177d9dc806}{INFO}}, \textcolor{stringliteral}{"{}Отправил клиенту результаты вычислений"{}});}
\DoxyCodeLine{136     \textcolor{keywordflow}{if}(sentBytes != \textcolor{keyword}{sizeof}(resultValue)) \{}
\DoxyCodeLine{137         std::string error\_message = strerror(errno);}
\DoxyCodeLine{138         std::string exception\_message = \textcolor{stringliteral}{"{}Ошибка чтения из сокета: "{}} + error\_message;}
\DoxyCodeLine{139         \mbox{\hyperlink{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}{logger}}.\mbox{\hyperlink{classLogger_a3d3f0801eeaf39b33a906ea8569c19b2}{log}}(\mbox{\hyperlink{Logger_8h_aca1fd1d8935433e6ba2e3918214e07f9acda21a4a072f2261f6d4ab596599f8b0}{CRITICAL}}, exception\_message);}
\DoxyCodeLine{140         \textcolor{keywordflow}{throw} std::system\_error(errno, std::generic\_category(), exception\_message);}
\DoxyCodeLine{141     \}}
\DoxyCodeLine{142 \}}

\end{DoxyCode}


\doxysubsection{Данные класса}
\mbox{\Hypertarget{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}\label{classCommunicator_ad60207d3a06ae5b0f05cb8670c46dc53}} 
\index{Communicator@{Communicator}!client\_socket@{client\_socket}}
\index{client\_socket@{client\_socket}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{client\_socket}{client\_socket}}
{\footnotesize\ttfamily int Communicator\+::client\+\_\+socket\hspace{0.3cm}{\ttfamily [private]}}



Дескриптор сокета, используемого для общения с клиентом. 

\mbox{\Hypertarget{classCommunicator_ad184d547c2ec7932aac78eea60e7a269}\label{classCommunicator_ad184d547c2ec7932aac78eea60e7a269}} 
\index{Communicator@{Communicator}!dataFile@{dataFile}}
\index{dataFile@{dataFile}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{dataFile}{dataFile}}
{\footnotesize\ttfamily std\+::string Communicator\+::data\+File\hspace{0.3cm}{\ttfamily [private]}}



Путь к файлу данных, используемому в процессе обработки (если требуется). 

\mbox{\Hypertarget{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}\label{classCommunicator_a214f4e058ba834f577b2576c479e8b0a}} 
\index{Communicator@{Communicator}!logger@{logger}}
\index{logger@{logger}!Communicator@{Communicator}}
\doxysubsubsection{\texorpdfstring{logger}{logger}}
{\footnotesize\ttfamily \mbox{\hyperlink{classLogger}{Logger}}\& Communicator\+::logger\hspace{0.3cm}{\ttfamily [private]}}



Ссылка на объект \mbox{\hyperlink{classLogger}{Logger}} для ведения логов. 



Объявления и описания членов классов находятся в файлах\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{Communicator_8h}{Communicator.\+h}}\item 
\mbox{\hyperlink{Communicator_8cpp}{Communicator.\+cpp}}\end{DoxyCompactItemize}
