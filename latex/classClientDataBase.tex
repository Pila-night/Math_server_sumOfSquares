\hypertarget{classClientDataBase}{}\doxysection{Класс Client\+Data\+Base}
\label{classClientDataBase}\index{ClientDataBase@{ClientDataBase}}


Класс для работы с базой данных клиентов, хранящей логины и пароли.  




{\ttfamily \#include $<$Client\+Data\+Base.\+h$>$}

\doxysubsection*{Открытые члены}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classClientDataBase_a6c9cd7ad989e4810bb3f77f783f41fc8}{Client\+Data\+Base}} (const std\+::string \&filename)
\begin{DoxyCompactList}\small\item\em Конструктор класса \mbox{\hyperlink{classClientDataBase}{Client\+Data\+Base}}. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classClientDataBase_a1deb355b82988dd27db7b07c54fcee84}{is\+Login\+Exists}} (const std\+::string \&login)
\begin{DoxyCompactList}\small\item\em Проверяет существование логина в базе данных. \end{DoxyCompactList}\item 
std\+::string \& \mbox{\hyperlink{classClientDataBase_ae7ccdd09c1205122d9b9e4622af3810a}{operator\mbox{[}$\,$\mbox{]}}} (const std\+::string \&login)
\begin{DoxyCompactList}\small\item\em Возвращает ссылку на пароль по заданному логину. \end{DoxyCompactList}\item 
const std\+::string \& \mbox{\hyperlink{classClientDataBase_ab21140408e2637bf6722eaf4682751e9}{operator\mbox{[}$\,$\mbox{]}}} (const std\+::string \&login) const
\begin{DoxyCompactList}\small\item\em Возвращает константную ссылку на пароль по заданному логину. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Закрытые члены}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classClientDataBase_a9e581a50cf25472800a60acdbf1d8d50}{load\+Database}} (const std\+::string \&filename)
\begin{DoxyCompactList}\small\item\em Загружает данные из файла в базу данных. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Закрытые данные}
\begin{DoxyCompactItemize}
\item 
std\+::unordered\+\_\+map$<$ std\+::string, std\+::string $>$ \mbox{\hyperlink{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}{database}}
\begin{DoxyCompactList}\small\item\em Внутренняя база данных, хранящая пары логин-\/пароль. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Класс для работы с базой данных клиентов, хранящей логины и пароли. 

База данных загружается из файла при создании объекта. Обеспечивает проверку существования логина и доступ к паролю по логину. 

\doxysubsection{Конструктор(ы)}
\mbox{\Hypertarget{classClientDataBase_a6c9cd7ad989e4810bb3f77f783f41fc8}\label{classClientDataBase_a6c9cd7ad989e4810bb3f77f783f41fc8}} 
\index{ClientDataBase@{ClientDataBase}!ClientDataBase@{ClientDataBase}}
\index{ClientDataBase@{ClientDataBase}!ClientDataBase@{ClientDataBase}}
\doxysubsubsection{\texorpdfstring{ClientDataBase()}{ClientDataBase()}}
{\footnotesize\ttfamily Client\+Data\+Base\+::\+Client\+Data\+Base (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename }\end{DoxyParamCaption})}



Конструктор класса \mbox{\hyperlink{classClientDataBase}{Client\+Data\+Base}}. 


\begin{DoxyParams}{Аргументы}
{\em filename} & Имя файла базы данных. \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Исключения}
{\em \mbox{\hyperlink{classDatabaseException}{Database\+Exception}}} & Если в файле обнаружен логин или пароль без пары. \\
\hline
{\em std\+::runtime\+\_\+error} & Если база данных пуста после загрузки. \\
\hline
{\em std\+::system\+\_\+error} & Если не удалось открыть файл. \\
\hline
\end{DoxyExceptions}

\begin{DoxyCode}{0}
\DoxyCodeLine{10 \{}
\DoxyCodeLine{11     \mbox{\hyperlink{classClientDataBase_a9e581a50cf25472800a60acdbf1d8d50}{loadDatabase}}(filename);}
\DoxyCodeLine{12 \}}

\end{DoxyCode}


\doxysubsection{Методы}
\mbox{\Hypertarget{classClientDataBase_a1deb355b82988dd27db7b07c54fcee84}\label{classClientDataBase_a1deb355b82988dd27db7b07c54fcee84}} 
\index{ClientDataBase@{ClientDataBase}!isLoginExists@{isLoginExists}}
\index{isLoginExists@{isLoginExists}!ClientDataBase@{ClientDataBase}}
\doxysubsubsection{\texorpdfstring{isLoginExists()}{isLoginExists()}}
{\footnotesize\ttfamily bool Client\+Data\+Base\+::is\+Login\+Exists (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{login }\end{DoxyParamCaption})}



Проверяет существование логина в базе данных. 


\begin{DoxyParams}{Аргументы}
{\em login} & Проверяемый логин. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
true, если логин существует, false в противном случае. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{15 \{}
\DoxyCodeLine{16     \textcolor{keywordflow}{return} \mbox{\hyperlink{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}{database}}.find(login) != \mbox{\hyperlink{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}{database}}.end();                   }
\DoxyCodeLine{17 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classClientDataBase_a9e581a50cf25472800a60acdbf1d8d50}\label{classClientDataBase_a9e581a50cf25472800a60acdbf1d8d50}} 
\index{ClientDataBase@{ClientDataBase}!loadDatabase@{loadDatabase}}
\index{loadDatabase@{loadDatabase}!ClientDataBase@{ClientDataBase}}
\doxysubsubsection{\texorpdfstring{loadDatabase()}{loadDatabase()}}
{\footnotesize\ttfamily void Client\+Data\+Base\+::load\+Database (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{filename }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Загружает данные из файла в базу данных. 


\begin{DoxyParams}{Аргументы}
{\em filename} & Имя файла базы данных. \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Исключения}
{\em \mbox{\hyperlink{classDatabaseException}{Database\+Exception}}} & Если в файле обнаружен логин или пароль без пары. \\
\hline
{\em std\+::runtime\+\_\+error} & Если база данных пуста после загрузки. \\
\hline
{\em std\+::system\+\_\+error} & Если не удалось открыть файл. \\
\hline
\end{DoxyExceptions}

\begin{DoxyCode}{0}
\DoxyCodeLine{19                                                         \{}
\DoxyCodeLine{20     ifstream file(filename);}
\DoxyCodeLine{21     \textcolor{keywordflow}{if} (file.is\_open()) \{}
\DoxyCodeLine{22         \textcolor{keywordtype}{string} line;}
\DoxyCodeLine{23         \textcolor{keywordflow}{while} (getline(file, line, \textcolor{charliteral}{':'})) \{}
\DoxyCodeLine{24             \textcolor{keywordtype}{string} login = line;}
\DoxyCodeLine{25             \textcolor{keywordtype}{string} password;}
\DoxyCodeLine{26             getline(file, password); }
\DoxyCodeLine{27             password.erase(password.find\_last\_not\_of(\textcolor{stringliteral}{"{} \(\backslash\)t\(\backslash\)r\(\backslash\)n"{}}) + 1);}
\DoxyCodeLine{28             \textcolor{keywordflow}{if} (login.empty()) \{}
\DoxyCodeLine{29                 std::string message = \textcolor{stringliteral}{"{}Предупреждение: Обнаружен пароль без логина в базе данных"{}};}
\DoxyCodeLine{30                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classDatabaseException}{DatabaseException}}(message);}
\DoxyCodeLine{31             \}}
\DoxyCodeLine{32             \textcolor{keywordflow}{if} (password.empty()) \{}
\DoxyCodeLine{33                 \textcolor{keywordtype}{string} message =  \textcolor{stringliteral}{"{}Предупреждение: Обнаружен логин без пароля в базе данных"{}};}
\DoxyCodeLine{34                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classDatabaseException}{DatabaseException}}(message);}
\DoxyCodeLine{35             \}}
\DoxyCodeLine{36             }
\DoxyCodeLine{37             \textcolor{keywordflow}{if} (login.empty() || password.empty()) \{}
\DoxyCodeLine{38                 \textcolor{keywordflow}{continue}; }
\DoxyCodeLine{39             \}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41             \mbox{\hyperlink{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}{database}}[login] = password; }
\DoxyCodeLine{42         \}}
\DoxyCodeLine{43 }
\DoxyCodeLine{44         file.close();}
\DoxyCodeLine{45         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}{database}}.empty()) \{}
\DoxyCodeLine{46             \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}Критическая ошибка: База данных пуста после загрузки из файла "{}} + filename);}
\DoxyCodeLine{47         \}}
\DoxyCodeLine{48     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{49         cerr << \textcolor{stringliteral}{"{}Ошибка: Не удалось открыть файл "{}} << filename << endl;}
\DoxyCodeLine{50         std::string error\_message = strerror(errno);}
\DoxyCodeLine{51         std::string exception\_message = \textcolor{stringliteral}{"{}Критическая ошибка: Не удалось открыть файл "{}} + filename + \textcolor{stringliteral}{"{} "{}} + error\_message;}
\DoxyCodeLine{52         \textcolor{keywordflow}{throw} std::system\_error(errno, std::generic\_category(), exception\_message);}
\DoxyCodeLine{53     \}}
\DoxyCodeLine{54 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classClientDataBase_ae7ccdd09c1205122d9b9e4622af3810a}\label{classClientDataBase_ae7ccdd09c1205122d9b9e4622af3810a}} 
\index{ClientDataBase@{ClientDataBase}!operator\mbox{[}\mbox{]}@{operator[]}}
\index{operator\mbox{[}\mbox{]}@{operator[]}!ClientDataBase@{ClientDataBase}}
\doxysubsubsection{\texorpdfstring{operator[]()}{operator[]()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::string \& Client\+Data\+Base\+::operator\mbox{[}$\,$\mbox{]} (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{login }\end{DoxyParamCaption})}



Возвращает ссылку на пароль по заданному логину. 


\begin{DoxyParams}{Аргументы}
{\em login} & Логин. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
Ссылка на строку, содержащую пароль. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{57 \{}
\DoxyCodeLine{58     \textcolor{keywordflow}{return} \mbox{\hyperlink{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}{database}}[login]; }
\DoxyCodeLine{59 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classClientDataBase_ab21140408e2637bf6722eaf4682751e9}\label{classClientDataBase_ab21140408e2637bf6722eaf4682751e9}} 
\index{ClientDataBase@{ClientDataBase}!operator\mbox{[}\mbox{]}@{operator[]}}
\index{operator\mbox{[}\mbox{]}@{operator[]}!ClientDataBase@{ClientDataBase}}
\doxysubsubsection{\texorpdfstring{operator[]()}{operator[]()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily const std\+::string \& Client\+Data\+Base\+::operator\mbox{[}$\,$\mbox{]} (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{login }\end{DoxyParamCaption}) const}



Возвращает константную ссылку на пароль по заданному логину. 


\begin{DoxyParams}{Аргументы}
{\em login} & Логин. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
Константная ссылка на строку, содержащую пароль. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{62 \{}
\DoxyCodeLine{63     \textcolor{keywordflow}{return} \mbox{\hyperlink{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}{database}}.at(login); }
\DoxyCodeLine{64 \}}

\end{DoxyCode}


\doxysubsection{Данные класса}
\mbox{\Hypertarget{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}\label{classClientDataBase_a870b6435e9f9987bbba9a7cde3f0c957}} 
\index{ClientDataBase@{ClientDataBase}!database@{database}}
\index{database@{database}!ClientDataBase@{ClientDataBase}}
\doxysubsubsection{\texorpdfstring{database}{database}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$std\+::string, std\+::string$>$ Client\+Data\+Base\+::database\hspace{0.3cm}{\ttfamily [private]}}



Внутренняя база данных, хранящая пары логин-\/пароль. 



Объявления и описания членов классов находятся в файлах\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ClientDataBase_8h}{Client\+Data\+Base.\+h}}\item 
\mbox{\hyperlink{ClientDataBase_8cpp}{Client\+Data\+Base.\+cpp}}\end{DoxyCompactItemize}
